module.exports=[90502,t=>{"use strict";var e=new TextDecoder,i=(t,i=0,r=t.length)=>e.decode(t.slice(i,r)),r=(t,e=0,i=t.length)=>t.slice(e,i).reduce((t,e)=>t+`0${e.toString(16)}`.slice(-2),""),h=(t,e)=>new DataView(t.buffer,t.byteOffset+e),l=(t,e=0)=>h(t,e).getInt16(0,!0),f=(t,e=0)=>h(t,e).getUint16(0,!1),n=(t,e=0)=>h(t,e).getUint16(0,!0),a=(t,e=0)=>{let i=h(t,e);return i.getUint16(0,!0)+(i.getUint8(2)<<16)},s=(t,e=0)=>h(t,e).getUint32(0,!1),c=(t,e=0)=>h(t,e).getUint32(0,!0),d=(t,e,i)=>h(t,e).getBigUint64(0,!i),o={readUInt16BE:f,readUInt16LE:n,readUInt32BE:s,readUInt32LE:c};function u(t,e,i=0,r=!1){return o[`readUInt${e}${r?"BE":"LE"}`](t,i)}function g(t,e,r){for(;r<t.length;){let h=function(t,e){if(t.length-e<4)return;let r=s(t,e);if(!(t.length-e<r))return{name:i(t,4+e,8+e),offset:e,size:r}}(t,r);if(!h)break;if(h.name===e)return h;r+=h.size>0?h.size:8}}function p(t,e){let i=t[e];return 0===i?256:i}function w(t,e){let i=6+16*e;return{height:p(t,i+1),width:p(t,i)}}var m={validate(t){let e=n(t,0),i=n(t,4);return 0===e&&0!==i&&1===n(t,2)},calculate(t){let e=n(t,4),i=w(t,0);if(1===e)return i;let r=[];for(let i=0;i<e;i+=1)r.push(w(t,i));return{width:i.width,height:i.height,images:r}}},v=/^GIF8[79]a/,b={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"},y={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024},E=class{constructor(t,e){this.input=t,this.endianness=e,this.byteOffset=2,this.bitOffset=0}getBits(t=1){let e=0,i=0;for(;i<t;){if(this.byteOffset>=this.input.length)throw Error("Reached end of input");let r=this.input[this.byteOffset],h=Math.min(t-i,8-this.bitOffset);if("little-endian"===this.endianness){let t=(1<<h)-1;e|=(r>>this.bitOffset&t)<<i}else{let t=(r&(1<<h)-1<<8-this.bitOffset-h)>>8-this.bitOffset-h;e=e<<h|t}i+=h,this.bitOffset+=h,8===this.bitOffset&&(this.byteOffset++,this.bitOffset=0)}return e}};function T(t,e){if(e)return 8*(1+t.getBits(5));let i=[9,13,18,30][t.getBits(2)];return 1+t.getBits(i)}var I={validate:t=>"ff0a"===r(t,0,2),calculate(t){let e=new E(t,"little-endian"),i=1===e.getBits(1),r=T(e,i),h=e.getBits(3);return{width:i&&0===h?8*(1+e.getBits(5)):0===h?T(e,!1):Math.floor(r*[1,1.2,4/3,1.5,16/9,5/4,2][h-1]),height:r}}},x="CgBI",P={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},B={default:t=>{let e=[];for(;t.length>0;){let i=t.shift();if("#"!==i[0]){e=i.split(" ");break}}if(2===e.length)return{height:Number.parseInt(e[1],10),width:Number.parseInt(e[0],10)};throw TypeError("Invalid PNM")},pam:t=>{let e={};for(;t.length>0;){let i=t.shift();if(i.length>16||i.charCodeAt(0)>128)continue;let[r,h]=i.split(" ");if(r&&h&&(e[r.toLowerCase()]=Number.parseInt(h,10)),e.height&&e.width)break}if(e.height&&e.width)return{height:e.height,width:e.width};throw TypeError("Invalid PAM")}},M=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,k=/\sheight=(['"])([^%]+?)\1/,N=/\sviewBox=(['"])(.+?)\1/i,O=/\swidth=(['"])([^%]+?)\1/,j={in:96,cm:37.79527559055118,em:16,ex:8,m:37.79527559055118*100,mm:37.79527559055118/10,pc:96/72/12,pt:96/72,px:1},z=RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(j).join("|")})?$`);function U(t){let e=z.exec(t);if(e)return Math.round(Number(e[1])*(j[e[2]]||1))}var F=256,G=257,C=259,S=3,V=4,$=16,A=12,X=20,J=2,L=8,R=new Set(["49492a00","4d4d002a","49492b00","4d4d002b"]),D=new Map([["bmp",{validate:t=>"BM"===i(t,0,2),calculate:t=>({height:Math.abs(((t,e=0)=>h(t,e).getInt32(0,!0))(t,22)),width:c(t,18)})}],["cur",{validate(t){let e=n(t,0),i=n(t,4);return 0===e&&0!==i&&2===n(t,2)},calculate:t=>m.calculate(t)}],["dds",{validate:t=>0x20534444===c(t,0),calculate:t=>({height:c(t,12),width:c(t,16)})}],["gif",{validate:t=>v.test(i(t,0,6)),calculate:t=>({height:n(t,8),width:n(t,6)})}],["heif",{validate(t){if("ftyp"!==i(t,4,8))return!1;let e=g(t,"ftyp",0);return!!e&&i(t,e.offset+8,e.offset+12)in b},calculate(t){let e=g(t,"meta",0),r=e&&g(t,"iprp",e.offset+12),h=r&&g(t,"ipco",r.offset+8);if(!h)throw TypeError("Invalid HEIF, no ipco box found");let l=i(t,8,12),f=[],n=h.offset+8;for(;n<h.offset+h.size;){let e=g(t,"ispe",n);if(!e)break;let i=s(t,e.offset+12),r=s(t,e.offset+16),l=g(t,"clap",n),a=i;l&&l.offset<h.offset+h.size&&(a=i-s(t,l.offset+12)),f.push({height:r,width:a}),n=e.offset+e.size}if(0===f.length)throw TypeError("Invalid HEIF, no sizes found");return{width:f[0].width,height:f[0].height,type:l,...f.length>1?{images:f}:{}}}}],["icns",{validate:t=>"icns"===i(t,0,4),calculate(t){let e=t.length,r=s(t,4),h=8,l=[];for(;h<r&&h<e;){let e=function(t,e){let r=e+4;return[i(t,e,r),s(t,r)]}(t,h),r=function(t){let e=y[t];return{width:e,height:e,type:t}}(e[0]);l.push(r),h+=e[1]}if(0===l.length)throw TypeError("Invalid ICNS, no sizes found");return{width:l[0].width,height:l[0].height,...l.length>1?{images:l}:{}}}}],["ico",m],["j2c",{validate:t=>0xff4fff51===s(t,0),calculate:t=>({height:s(t,12),width:s(t,8)})}],["jp2",{validate(t){if("jP  "!==i(t,4,8))return!1;let e=g(t,"ftyp",0);return!!e&&"jp2 "===i(t,e.offset+8,e.offset+12)},calculate(t){let e=g(t,"jp2h",0),i=e&&g(t,"ihdr",e.offset+8);if(i)return{height:s(t,i.offset+8),width:s(t,i.offset+12)};throw TypeError("Unsupported JPEG 2000 format")}}],["jpg",{validate:t=>"ffd8"===r(t,0,2),calculate(t){let e,i,h=t.slice(4);for(;h.length;){var l,n;let t=f(h,0);if(t>h.length)throw TypeError("Corrupt JPG, exceeded buffer limits");if(255!==h[t]){h=h.slice(1);continue}if("45786966"===r(h,2,6)&&(e=function(t,e){let i=t.slice(2,e),h=r(i,6,8),l="4d4d"===h;if(l||"4949"===h)return function(t,e){let i=u(t,16,14,e);for(let r=0;r<i;r++){let i=16+12*r,h=i+12;if(i>t.length)return;let l=t.slice(i,h);if(274===u(l,16,0,e)){if(3!==u(l,16,2,e)||1!==u(l,32,4,e))return;return u(l,16,8,e)}}}(i,l)}(h,t)),192===(i=h[t+1])||193===i||194===i){let i={height:f(l=h,n=t+5),width:f(l,n+2)};if(!e)return i;return{height:i.height,orientation:e,width:i.width}}h=h.slice(t+2)}throw TypeError("Invalid JPG, no size found")}}],["jxl",{validate:t=>{if("JXL "!==i(t,4,8))return!1;let e=g(t,"ftyp",0);return!!e&&"jxl "===i(t,e.offset+8,e.offset+12)},calculate(t){let e=function(t){let e=g(t,"jxlc",0);if(e)return t.slice(e.offset+8,e.offset+e.size);let i=function(t){let e=[],i=0;for(;i<t.length;){let r=g(t,"jxlp",i);if(!r)break;e.push(t.slice(r.offset+12,r.offset+r.size)),i=r.offset+r.size}return e}(t);if(i.length>0){var r=i;let t=new Uint8Array(r.reduce((t,e)=>t+e.length,0)),e=0;for(let i of r)t.set(i,e),e+=i.length;return t}}(t);if(e)return I.calculate(e);throw Error("No codestream found in JXL container")}}],["jxl-stream",I],["ktx",{validate:t=>["KTX 11","KTX 20"].includes(i(t,1,7)),calculate:t=>{let e=49===t[5]?"ktx":"ktx2",i="ktx"===e?36:20;return{height:c(t,i+4),width:c(t,i),type:e}}}],["png",{validate(t){if("PNG\r\n\x1a\n"===i(t,1,8)){let e=i(t,12,16);if(e===x&&(e=i(t,28,32)),"IHDR"!==e)throw TypeError("Invalid PNG");return!0}return!1},calculate:t=>i(t,12,16)===x?{height:s(t,36),width:s(t,32)}:{height:s(t,20),width:s(t,16)}}],["pnm",{validate:t=>i(t,0,2)in P,calculate(t){let e=P[i(t,0,2)],r=i(t,3).split(/[\r\n]+/);return(B[e]||B.default)(r)}}],["psd",{validate:t=>"8BPS"===i(t,0,4),calculate:t=>({height:s(t,14),width:s(t,18)})}],["svg",{validate:t=>M.test(i(t,0,1e3)),calculate(t){let e=i(t).match(M);if(e){var r,h;let t,i,l,f,n=(i=(h=e[0]).match(O),l=h.match(k),f=h.match(N),{height:l&&U(l[2]),viewbox:f&&{height:U((t=f[2].split(" "))[3]),width:U(t[2])},width:i&&U(i[2])});if(n.width&&n.height)return{height:n.height,width:n.width};if(n.viewbox){let t;return t=(r=n.viewbox).width/r.height,n.width?{height:Math.floor(n.width/t),width:n.width}:n.height?{height:n.height,width:Math.floor(n.height*t)}:{height:r.height,width:r.width}}}throw TypeError("Invalid SVG")}}],["tga",{validate:t=>0===n(t,0)&&0===n(t,4),calculate:t=>({height:n(t,14),width:n(t,12)})}],["tiff",{validate:t=>{let e=r(t,0,4);return R.has(e)},calculate(t){let e,r,h=(e=i(t,0,2),r=u(t,16,2,"MM"===e),{isBigEndian:"MM"===e,isBigTiff:43===r});h.isBigTiff&&function(t,e){let i=u(t,16,4,e),r=u(t,16,6,e);if(8!==i||0!==r)throw TypeError("Invalid BigTIFF header")}(t,h.isBigEndian);let l=function(t,{isBigEndian:e,isBigTiff:i}){let r={},h=t;for(;h?.length;){let t=u(h,16,0,e),l=u(h,16,2,e),f=i?Number(d(h,4,e)):u(h,32,4,e);if(0===t)break;if(1===f&&(l===S||l===V||i&&l===$)){let f=i?12:8;r[t]=function(t,e,i,r){switch(e){case S:return u(t,16,i,r);case V:return u(t,32,i,r);case $:{let e=Number(d(t,i,r));if(e>Number.MAX_SAFE_INTEGER)throw TypeError("Value too large");return e}default:return 0}}(h,l,f,e)}h=function(t,e){let i=e?X:A;if(t.length>i)return t.slice(i)}(h,i)}return r}(function(t,{isBigEndian:e,isBigTiff:i}){let r=i?Number(d(t,8,e)):u(t,32,4,e);return t.slice(r+(i?L:J))}(t,h),h),f={height:l[G],width:l[F],type:h.isBigTiff?"bigtiff":"tiff"};if(l[C]&&(f.compression=l[C]),!f.width||!f.height)throw TypeError("Invalid Tiff. Missing tags");return f}}],["webp",{validate(t){let e="RIFF"===i(t,0,4),r="WEBP"===i(t,8,12),h="VP8"===i(t,12,15);return e&&r&&h},calculate(t){let e=i(t,12,16),h=t.slice(20,30);if("VP8X"===e){let t=h[0];if((192&t)==0&&(1&t)==0)return{height:1+a(h,7),width:1+a(h,4)};throw TypeError("Invalid WebP")}if("VP8 "===e&&47!==h[0])return{height:16383&l(h,8),width:16383&l(h,6)};let f=r(h,3,6);if("VP8L"===e&&"9d012a"!==f)return{height:1+((15&h[4])<<10|h[3]<<2|(192&h[2])>>6),width:1+((63&h[2])<<8|h[1])};throw TypeError("Invalid WebP")}}]]),H=Array.from(D.keys()),W=new Map([[0,"heif"],[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]),K={disabledTypes:[]};function _(t){let e,i,r=(e=t[0],(i=W.get(e))&&D.get(i).validate(t)?i:H.find(e=>D.get(e).validate(t)));if(void 0!==r){if(K.disabledTypes.indexOf(r)>-1)throw TypeError(`disabled file type: ${r}`);let e=D.get(r).calculate(t);if(void 0!==e){if(e.type=e.type??r,e.images&&e.images.length>1){let t=e.images.reduce((t,e)=>e.width*e.height>t.width*t.height?e:t,e.images[0]);e.width=t.width,e.height=t.height}return e}}throw TypeError(`unsupported file type: ${r}`)}var q=t=>{K.disabledTypes=t};t.s(["default",()=>_,"disableTypes",()=>q,"imageSize",()=>_,"types",()=>H])}];

//# sourceMappingURL=0913f_image-size_dist_index_mjs_c22d7581._.js.map