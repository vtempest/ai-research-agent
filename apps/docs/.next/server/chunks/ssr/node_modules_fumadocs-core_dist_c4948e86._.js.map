{"version":3,"sources":["turbopack:///[project]/node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js","turbopack:///[project]/node_modules/fumadocs-core/dist/chunk-ZMWYLUDP.js","turbopack:///[project]/node_modules/fumadocs-core/dist/chunk-XMAVUWLD.js","turbopack:///[project]/node_modules/fumadocs-core/dist/static-PIZYNE45.js"],"sourcesContent":["// src/search/shared.ts\nfunction escapeRegExp(input) {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction buildRegexFromQuery(q) {\n  const trimmed = q.trim();\n  if (trimmed.length === 0) return null;\n  const terms = Array.from(\n    new Set(\n      trimmed.split(/\\s+/).map((t) => t.trim()).filter(Boolean)\n    )\n  );\n  if (terms.length === 0) return null;\n  const escaped = terms.map(escapeRegExp).join(\"|\");\n  return new RegExp(`(${escaped})`, \"gi\");\n}\nfunction createContentHighlighter(query) {\n  const regex = typeof query === \"string\" ? buildRegexFromQuery(query) : query;\n  return {\n    highlight(content) {\n      if (!regex) return [{ type: \"text\", content }];\n      const out = [];\n      let i = 0;\n      for (const match of content.matchAll(regex)) {\n        if (i < match.index) {\n          out.push({\n            type: \"text\",\n            content: content.substring(i, match.index)\n          });\n        }\n        out.push({\n          type: \"text\",\n          content: match[0],\n          styles: {\n            highlight: true\n          }\n        });\n        i = match.index + match[0].length;\n      }\n      if (i < content.length) {\n        out.push({\n          type: \"text\",\n          content: content.substring(i)\n        });\n      }\n      return out;\n    }\n  };\n}\n\nexport {\n  createContentHighlighter\n};\n","// src/utils/remove-undefined.ts\nfunction removeUndefined(value, deep = false) {\n  const obj = value;\n  for (const key in obj) {\n    if (obj[key] === void 0) delete obj[key];\n    if (!deep) continue;\n    const entry = obj[key];\n    if (typeof entry === \"object\" && entry !== null) {\n      removeUndefined(entry, deep);\n      continue;\n    }\n    if (Array.isArray(entry)) {\n      for (const item of entry) removeUndefined(item, deep);\n    }\n  }\n  return value;\n}\n\nexport {\n  removeUndefined\n};\n","import {\n  removeUndefined\n} from \"./chunk-ZMWYLUDP.js\";\nimport {\n  createContentHighlighter\n} from \"./chunk-CNWEGOUF.js\";\n\n// src/search/orama/search/simple.ts\nimport { search } from \"@orama/orama\";\nasync function searchSimple(db, query, params = {}) {\n  const highlighter = createContentHighlighter(query);\n  const result = await search(db, {\n    term: query,\n    tolerance: 1,\n    ...params,\n    boost: {\n      title: 2,\n      ...\"boost\" in params ? params.boost : void 0\n    }\n  });\n  return result.hits.map((hit) => ({\n    type: \"page\",\n    content: hit.document.title,\n    contentWithHighlights: highlighter.highlight(hit.document.title),\n    id: hit.document.url,\n    url: hit.document.url\n  }));\n}\n\n// src/search/orama/search/advanced.ts\nimport { getByID, search as search2 } from \"@orama/orama\";\nasync function searchAdvanced(db, query, tag = [], {\n  mode = \"fulltext\",\n  ...override\n} = {}) {\n  if (typeof tag === \"string\") tag = [tag];\n  let params = {\n    ...override,\n    mode,\n    where: removeUndefined({\n      tags: tag.length > 0 ? {\n        containsAll: tag\n      } : void 0,\n      ...override.where\n    }),\n    groupBy: {\n      properties: [\"page_id\"],\n      maxResult: 8,\n      ...override.groupBy\n    }\n  };\n  if (query.length > 0) {\n    params = {\n      ...params,\n      term: query,\n      properties: mode === \"fulltext\" ? [\"content\"] : [\"content\", \"embeddings\"]\n    };\n  }\n  const highlighter = createContentHighlighter(query);\n  const result = await search2(db, params);\n  const list = [];\n  for (const item of result.groups ?? []) {\n    const pageId = item.values[0];\n    const page = getByID(db, pageId);\n    if (!page) continue;\n    list.push({\n      id: pageId,\n      type: \"page\",\n      content: page.content,\n      contentWithHighlights: highlighter.highlight(page.content),\n      url: page.url\n    });\n    for (const hit of item.result) {\n      if (hit.document.type === \"page\") continue;\n      list.push({\n        id: hit.document.id.toString(),\n        content: hit.document.content,\n        contentWithHighlights: highlighter.highlight(hit.document.content),\n        type: hit.document.type,\n        url: hit.document.url\n      });\n    }\n  }\n  return list;\n}\n\nexport {\n  searchSimple,\n  searchAdvanced\n};\n","import {\n  searchAdvanced,\n  searchSimple\n} from \"./chunk-XMAVUWLD.js\";\nimport \"./chunk-ZMWYLUDP.js\";\nimport \"./chunk-CNWEGOUF.js\";\nimport \"./chunk-JSBRDJBE.js\";\n\n// src/search/client/static.ts\nimport { create, load } from \"@orama/orama\";\nvar cache = /* @__PURE__ */ new Map();\nasync function loadDB({\n  from = \"/api/search\",\n  initOrama = (locale) => create({ schema: { _: \"string\" }, language: locale })\n}) {\n  const cacheKey = from;\n  const cached = cache.get(cacheKey);\n  if (cached) return cached;\n  async function init() {\n    const res = await fetch(from);\n    if (!res.ok)\n      throw new Error(\n        `failed to fetch exported search indexes from ${from}, make sure the search database is exported and available for client.`\n      );\n    const data = await res.json();\n    const dbs = /* @__PURE__ */ new Map();\n    if (data.type === \"i18n\") {\n      await Promise.all(\n        Object.entries(data.data).map(async ([k, v]) => {\n          const db2 = await initOrama(k);\n          load(db2, v);\n          dbs.set(k, {\n            type: v.type,\n            db: db2\n          });\n        })\n      );\n      return dbs;\n    }\n    const db = await initOrama();\n    load(db, data);\n    dbs.set(\"\", {\n      type: data.type,\n      db\n    });\n    return dbs;\n  }\n  const result = init();\n  cache.set(cacheKey, result);\n  return result;\n}\nasync function search(query, options) {\n  const { tag, locale } = options;\n  const db = (await loadDB(options)).get(locale ?? \"\");\n  if (!db) return [];\n  if (db.type === \"simple\")\n    return searchSimple(db, query);\n  return searchAdvanced(db.db, query, tag);\n}\nexport {\n  search\n};\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3]}