{"version":3,"sources":["../../../../../../apps/docs/node_modules/.pnpm/fumadocs-openapi%4010.0.11_%40types%2Breact-dom%4019.2.3_%40types%2Breact%4019.2.6__%40types%2Breact%4019.2_9ef6bace3a0bb159887c545478466d7a/node_modules/fumadocs-openapi/dist/ui/contexts/api.js","../../../../../../apps/docs/node_modules/.pnpm/fumadocs-openapi%4010.0.11_%40types%2Breact-dom%4019.2.3_%40types%2Breact%4019.2.6__%40types%2Breact%4019.2_9ef6bace3a0bb159887c545478466d7a/node_modules/fumadocs-openapi/dist/ui/client/storage-key.js"],"sourcesContent":["'use client';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createContext, use, useEffect, useMemo, useRef, useState, } from 'react';\nimport { defaultAdapters } from '../../requests/media/adapter.js';\nimport { useStorageKey } from '../client/storage-key.js';\nconst ApiContext = createContext(null);\nconst ServerSelectContext = createContext(null);\nexport function useApiContext() {\n    const ctx = use(ApiContext);\n    if (!ctx)\n        throw new Error('Component must be used under <ApiProvider />');\n    return ctx;\n}\nexport function useServerSelectContext() {\n    const ctx = use(ServerSelectContext);\n    if (!ctx)\n        throw new Error('Component must be used under <ApiProvider />');\n    return ctx;\n}\nexport function ApiProvider({ defaultBaseUrl, children, servers, shikiOptions, client, }) {\n    const serverRef = useRef(null);\n    return (_jsx(ApiContext, { value: useMemo(() => ({\n            serverRef,\n            shikiOptions,\n            client,\n            mediaAdapters: {\n                ...defaultAdapters,\n                ...client.mediaAdapters,\n            },\n            servers,\n        }), [servers, client, shikiOptions]), children: _jsx(ServerSelectProvider, { defaultBaseUrl: defaultBaseUrl, children: children }) }));\n}\nfunction ServerSelectProvider({ defaultBaseUrl, children, }) {\n    const { servers, serverRef } = useApiContext();\n    const storageKeys = useStorageKey();\n    const [server, setServer] = useState(() => {\n        const defaultItem = defaultBaseUrl\n            ? servers.find((item) => item.url === defaultBaseUrl)\n            : servers[0];\n        return defaultItem\n            ? {\n                url: defaultItem.url,\n                variables: getDefaultValues(defaultItem),\n            }\n            : null;\n    });\n    serverRef.current = server;\n    useEffect(() => {\n        const cached = localStorage.getItem(storageKeys.of('server-url'));\n        if (!cached)\n            return;\n        try {\n            const obj = JSON.parse(cached);\n            if (!obj || typeof obj !== 'object')\n                return;\n            setServer(obj);\n        }\n        catch {\n            // ignore\n        }\n    }, [storageKeys]);\n    return (_jsx(ServerSelectContext, { value: useMemo(() => ({\n            server,\n            setServerVariables(variables) {\n                setServer((prev) => {\n                    if (!prev)\n                        return null;\n                    const updated = { ...prev, variables };\n                    localStorage.setItem(storageKeys.of('server-url'), JSON.stringify(updated));\n                    return updated;\n                });\n            },\n            setServer(value) {\n                const obj = servers.find((item) => item.url === value);\n                if (!obj)\n                    return;\n                const result = {\n                    url: value,\n                    variables: getDefaultValues(obj),\n                };\n                localStorage.setItem(storageKeys.of('server-url'), JSON.stringify(result));\n                setServer(result);\n            },\n        }), [server, servers, storageKeys]), children: children }));\n}\nfunction getDefaultValues(server) {\n    const out = {};\n    if (!server.variables)\n        return out;\n    for (const [k, v] of Object.entries(server.variables)) {\n        out[k] = v.default;\n    }\n    return out;\n}\n","import { useApiContext } from '../contexts/api.js';\nimport { useMemo } from 'react';\nexport function useStorageKey() {\n    const { storageKeyPrefix } = useApiContext().client;\n    return useMemo(() => ({\n        of: (name) => getStorageKey(storageKeyPrefix, name),\n        AuthField: (field) => getStorageKey(storageKeyPrefix, `auth-${field.original?.id ?? field.fieldName}`),\n    }), [storageKeyPrefix]);\n}\nexport function getStorageKey(prefix = 'fumadocs-openapi-', name) {\n    return prefix + name;\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1]}