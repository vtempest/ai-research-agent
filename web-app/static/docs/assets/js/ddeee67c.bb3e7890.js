"use strict";(self.webpackChunkopenapi_docusaurus=self.webpackChunkopenapi_docusaurus||[]).push([["2317"],{46762:function(e,r,n){n.r(r),n.d(r,{default:()=>a,frontMatter:()=>i,metadata:()=>s,assets:()=>l,toc:()=>o,contentTitle:()=>d});var s=JSON.parse('{"id":"functions/extractor/url-to-content/scrape-url","title":"scrape-url","description":"ai-research-agent / extractor/url-to-content/scrape-url","source":"@site/docs/functions/extractor/url-to-content/scrape-url.md","sourceDirName":"functions/extractor/url-to-content","slug":"/functions/extractor/url-to-content/scrape-url","permalink":"/docs/functions/extractor/url-to-content/scrape-url","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"functions","previous":{"title":"docx-to-content","permalink":"/docs/functions/extractor/url-to-content/docx-to-content"},"next":{"title":"youtube-to-text","permalink":"/docs/functions/extractor/url-to-content/youtube-to-text"}}'),t=n("85893"),c=n("50065");let i={},d=void 0,l={},o=[{value:"Extract",id:"extract",level:2},{value:"scrapeURL()",id:"scrapeurl",level:3},{value:"Tardigrade the Web Crawler",id:"tardigrade-the-web-crawler",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"Example",id:"example",level:4},{value:"Author",id:"author",level:4},{value:"Other",id:"other",level:2},{value:"fetchScrapingRules()",id:"fetchscrapingrules",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-1",level:4}];function h(e){let r={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"/docs/functions/",children:"ai-research-agent"})," / extractor/url-to-content/scrape-url"]}),"\n",(0,t.jsx)(r.h2,{id:"extract",children:"Extract"}),"\n",(0,t.jsx)(r.h3,{id:"scrapeurl",children:"scrapeURL()"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"function scrapeURL(url, options?): Promise<string>\n"})}),"\n",(0,t.jsx)(r.h3,{id:"tardigrade-the-web-crawler",children:"Tardigrade the Web Crawler"}),"\n",(0,t.jsx)("img",{src:"https://i.imgur.com/XXXTprT.png",width:"350px"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Use Fetch API, check for bot detection."})," Scrape  any domain's URL to get its HTML, JSON, or arraybuffer.",(0,t.jsx)("br",{}),"\r\nScraping internet pages is a ",(0,t.jsx)(r.a,{href:"https://blog.apify.com/is-web-scraping-legal/",children:"free speech right\r\n"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Features: timeout, redirects, default UA, referer as google, and bot\r\ndetection checking. ",(0,t.jsx)("br",{})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"If fetch method does not get needed HTML, use Docker proxy as backup."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"https://github.com/vtempest/ai-research-agent/tree/master/src/crawler",children:"Setup Docker"}),"\r\ncontainer with NodeJS server API renders with puppeteer DOM to get all HTML loaded by\r\nsecondary in-page API requests after the initial page request, including user login and cookie storage."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Bypass Cloudflare bot check: A webpage proxy that request through Chromium (puppeteer) - can be used\r\nto bypass Cloudflare anti bot using cookie id javascript method."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:['Send your request to the server with the port 3000 and add your URL to the "url"\r\nquery string like this: ',(0,t.jsx)(r.code,{children:"http://localhost:3000/?url=https://example.org"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Optional: Setup residential IP proxy to access sites that IP-block datacenters\r\nand manage rotation with ",(0,t.jsx)(r.a,{href:"https://scrapoxy.io",children:"Scrapoxy"}),". Recommended:\r\n",(0,t.jsx)(r.a,{href:"https://hypeproxy.io/products/static-residential-proxies",children:"Hypeproxy"}),"\r\n",(0,t.jsx)(r.a,{href:"https://ninjasproxy.com/residential-proxies/",children:"NinjasProxy"}),"\r\n",(0,t.jsx)(r.a,{href:"https://app.proxy-cheap.com/order",children:"Proxy-Cheap"}),"\r\n",(0,t.jsx)(r.a,{href:"https://liveproxies.io/rotating-residential-proxies-pricing",children:"LiveProxies"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Parameter"}),(0,t.jsx)("th",{children:"Type"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"url"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"string"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"any domain's URL"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:["{ ",(0,t.jsx)(r.code,{children:"changeReferer"}),": ",(0,t.jsx)(r.code,{children:"number"}),"; ",(0,t.jsx)(r.code,{children:"checkBotDetection"}),": ",(0,t.jsx)(r.code,{children:"number"}),"; ",(0,t.jsx)(r.code,{children:"checkRobotsAllowed"}),": ",(0,t.jsx)(r.code,{children:"boolean"}),"; ",(0,t.jsx)(r.code,{children:"maxRedirects"}),": ",(0,t.jsx)(r.code,{children:"number"}),"; ",(0,t.jsx)(r.code,{children:"proxy"}),": ",(0,t.jsx)(r.code,{children:"string"}),"; ",(0,t.jsx)(r.code,{children:"timeout"}),": ",(0,t.jsx)(r.code,{children:"number"}),"; ",(0,t.jsx)(r.code,{children:"userAgentIndex"}),": ",(0,t.jsx)(r.code,{children:"number"}),"; }"]})}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options.changeReferer"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"number"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"default=true - set referer as google"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options.checkBotDetection"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"number"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"default=true - check for bot detection messages"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options.checkRobotsAllowed"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"boolean"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"default=false - check robots.txt rules"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options.maxRedirects"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"number"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"default=3 - max redirects to follow"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options.proxy"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"string"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"default=false - use proxy url"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options.timeout"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"number"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"default=5 -  abort request if not retrived, in seconds"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"options.userAgentIndex"}),"?"]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"number"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"default=0 - index of [google bot, default chrome]"})})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"returns",children:"Returns"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"Promise"}),"<",(0,t.jsx)(r.code,{children:"string"}),">"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"HTML, JSON, arraybuffer, or error object"}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:'await scrapeURL("https://hckrnews.com", {timeout: 5, userAgentIndex: 1})\n'})}),"\n",(0,t.jsx)(r.h4,{id:"author",children:"Author"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://airesearch.js.org",children:"ai-research-agent (2024)"})}),"\n",(0,t.jsx)(r.h2,{id:"other",children:"Other"}),"\n",(0,t.jsx)(r.h3,{id:"fetchscrapingrules",children:"fetchScrapingRules()"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"function fetchScrapingRules(url): Promise<Object>\n"})}),"\n",(0,t.jsx)(r.p,{children:"Fetches and parses the robots.txt file for a given URL."}),"\n",(0,t.jsx)(r.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Parameter"}),(0,t.jsx)("th",{children:"Type"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"url"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"string"})})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.p,{children:"The base URL to fetch the robots.txt from."})})]})})]}),"\n",(0,t.jsx)(r.h4,{id:"returns-1",children:"Returns"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"Promise"}),"<",(0,t.jsx)(r.code,{children:"Object"}),">"]}),"\n",(0,t.jsx)(r.p,{children:"A JSON object representing the parsed robots.txt."})]})}function a(e={}){let{wrapper:r}={...(0,c.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},50065:function(e,r,n){n.d(r,{Z:function(){return d},a:function(){return i}});var s=n(67294);let t={},c=s.createContext(t);function i(e){let r=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(c.Provider,{value:r},e.children)}}}]);