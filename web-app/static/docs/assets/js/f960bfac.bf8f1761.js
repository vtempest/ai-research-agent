"use strict";(self.webpackChunkopenapi_docusaurus=self.webpackChunkopenapi_docusaurus||[]).push([["4587"],{56642:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>s,metadata:()=>r,assets:()=>d,toc:()=>o,contentTitle:()=>l});var r=JSON.parse('{"id":"functions/extractor/html-to-content/extract-content/extract-content-readability","title":"extract-content-readability","description":"ai-research-agent / extractor/html-to-content/extract-content/extract-content-readability","source":"@site/docs/functions/extractor/html-to-content/extract-content/extract-content-readability.md","sourceDirName":"functions/extractor/html-to-content/extract-content","slug":"/functions/extractor/html-to-content/extract-content/extract-content-readability","permalink":"/docs/functions/extractor/html-to-content/extract-content/extract-content-readability","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"functions","previous":{"title":"extract-content-mercury","permalink":"/docs/functions/extractor/html-to-content/extract-content/extract-content-mercury"},"next":{"title":"html-to-basic-html","permalink":"/docs/functions/extractor/html-to-content/html-to-basic-html"}}'),c=t("85893"),i=t("50065");let s={},l=void 0,d={},o=[{value:"Extract",id:"extract",level:2},{value:"extractMainContentFromHTML()",id:"extractmaincontentfromhtml",level:3},{value:"HTML-to-Main-Content Extractor #1",id:"html-to-main-content-extractor-1",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"Example",id:"example",level:4},{value:"Author",id:"author",level:4}];function a(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"/docs/functions/",children:"ai-research-agent"})," / extractor/html-to-content/extract-content/extract-content-readability"]}),"\n",(0,c.jsx)(n.h2,{id:"extract",children:"Extract"}),"\n",(0,c.jsx)(n.h3,{id:"extractmaincontentfromhtml",children:"extractMainContentFromHTML()"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"function extractMainContentFromHTML(html, options?): Element\n"})}),"\n",(0,c.jsx)(n.h3,{id:"html-to-main-content-extractor-1",children:"HTML-to-Main-Content Extractor #1"}),"\n",(0,c.jsx)(n.p,{children:"The function extracts main content with regex patterns, cleaning HTML, scoring nodes\nbased on content indicators like paragraphs and id/class names, selecting\nthe top candidate, extracting it, and cleaning up content around it."}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Define regular expressions:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Various regex patterns are defined to identify content and non-content areas."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Define helper functions:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"normalizeSpaces: Normalizes whitespace in a string."}),"\n",(0,c.jsx)(n.li,{children:"stripTags: Removes all HTML tags from a string."}),"\n",(0,c.jsx)(n.li,{children:"getTextLength: Calculates the length of text after stripping tags."}),"\n",(0,c.jsx)(n.li,{children:"calculateLinkDensity: Calculates the ratio of link text to total text."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Clean HTML:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Remove unlikely candidates (e.g., ads, sidebars) from the HTML."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Define scoring function:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"scoreNode: Assigns a score to an HTML node based on content and attributes."}),"\n",(0,c.jsx)(n.li,{children:"Increases score for positive indicators (e.g., article, body, content tags)."}),"\n",(0,c.jsx)(n.li,{children:"Decreases score for negative indicators (e.g., hidden, footer, sidebar tags)."}),"\n",(0,c.jsx)(n.li,{children:"Adds to score based on paragraph tags and text length."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Find and score candidate nodes:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Identify potential content nodes in the cleaned HTML."}),"\n",(0,c.jsx)(n.li,{children:"Score each node using the scoreNode function."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Select top candidate:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Sort candidates by score and select the highest-scoring node."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Extract content:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Use regex to extract content around the top candidate node."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Clean up extracted content:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Remove script and style tags and their contents."}),"\n",(0,c.jsx)(n.li,{children:"Process anchor tags based on content density."}),"\n",(0,c.jsx)(n.li,{children:"Keep only specific HTML tags (a, p, img, h1-h6, ul, ol, li)."}),"\n",(0,c.jsx)(n.li,{children:"Remove excess whitespace from the final content."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://trafilatura.readthedocs.io/en/latest/evaluation.html",children:"Article Extraction Benchmark"})}),"\n",(0,c.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Parameter"}),(0,c.jsx)("th",{children:"Type"}),(0,c.jsx)("th",{children:"Description"})]})}),(0,c.jsxs)("tbody",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"html"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"any"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:"\u2010"})})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"options"}),"?"]})}),(0,c.jsx)("td",{children:(0,c.jsxs)(n.p,{children:["{ ",(0,c.jsx)(n.code,{children:"minContentLength"}),": ",(0,c.jsx)(n.code,{children:"number"}),"; ",(0,c.jsx)(n.code,{children:"minScore"}),": ",(0,c.jsx)(n.code,{children:"number"}),"; ",(0,c.jsx)(n.code,{children:"minTextLength"}),": ",(0,c.jsx)(n.code,{children:"number"}),"; ",(0,c.jsx)(n.code,{children:"retryLength"}),": ",(0,c.jsx)(n.code,{children:"number"}),"; }"]})}),(0,c.jsx)("td",{})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"options.minContentLength"}),"?"]})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"number"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:"default=140 - Minimum length of content to be considered valid"})})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"options.minScore"}),"?"]})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"number"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:"default=20 - Minimum score for content to be considered valid"})})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"options.minTextLength"}),"?"]})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"number"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:"default=25 - Minimum length of text to be considered valid"})})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"options.retryLength"}),"?"]})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"number"})})}),(0,c.jsx)("td",{children:(0,c.jsx)(n.p,{children:"default=250 - Length to retry content extraction if initial attempt fails"})})]})]})]}),"\n",(0,c.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"Element"})}),"\n",(0,c.jsx)(n.p,{children:"Extracted HTML element of main content such as article body"}),"\n",(0,c.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:'var url = "https://www.nytimes.com/2024/08/28/business/telegram-ceo-pavel-durov-charged.html"\nconst html = await (await fetch(url)).text();\nvar articleContent = extractMainContentFromHTML(html);\n'})}),"\n",(0,c.jsx)(n.h4,{id:"author",children:"Author"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"https://airesearch.js.org",children:"ai-research-agent (2024)"}),"\nBased on ",(0,c.jsx)(n.a,{href:"https://github.com/mozilla/readability",children:"Mozilla Readability (2015), Arc90 (2010)"})]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},50065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return s}});var r=t(67294);let c={},i=r.createContext(c);function s(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);